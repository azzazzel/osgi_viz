/**
 * D3 Force Network Chart - v2.1.2 - 2018-01-07
 * https://github.com/ogobrecht/d3-force-apex-plugin
 * Copyright (c) 2015-2018 Ottmar Gobrecht - MIT license
 */
function netGobrechtsD3Force(a,b,c,d){"use strict";var e={conf:{},confDefaults:{},data:{},dom:{},events:{},lib:{},main:{},status:{},tools:{},version:"2.1.2"},f={};return e.main.init=function(){e.dom.containerId=a||"D3Force"+Math.floor(1e6*Math.random()),e.confUser=b||{},e.status.apexPluginId=c,e.status.apexPageItemsToSubmit=d&&""!==d?d.replace(/\s/g,"").split(","):!1,e.main.setupConfiguration(),e.main.setupDom(),e.main.setupFunctionReferences()},e.main.setupConfiguration=function(){e.conf.debug=e.status.apexPluginId&&1===apex.jQuery("#pdebug").length,e.status.debugPrefix="D3 Force in DOM container #"+e.dom.containerId+": ",e.status.customize=!1,e.status.customizeCurrentMenu="nodes",e.status.customizeCurrentTabPosition=null,e.status.forceTickCounter=0,e.status.forceStartTime=0,e.status.forceRunning=!1,e.status.graphStarted=!1,e.status.graphRendering=!1,e.status.graphReady=!1,e.status.graphOldPositions=null,e.status.sampleData=!1,e.status.wrapLabelsOnNextTick=!1,e.status.labelFontSize=null,e.confDefaults.minNodeRadius={display:!0,relation:"node",type:"number",val:6,options:[12,11,10,9,8,7,6,5,4,3,2,1]},e.confDefaults.maxNodeRadius={display:!0,relation:"node",type:"number",val:18,options:[36,34,32,30,28,26,24,22,20,18,16,14,12]},e.confDefaults.colorScheme={display:!0,relation:"node",type:"text",val:"color20",options:["color20","color20b","color20c","color10","direct"]},e.confDefaults.dragMode={display:!0,relation:"node",type:"bool",val:!0,options:[!0,!1]},e.confDefaults.pinMode={display:!0,relation:"node",type:"bool",val:!1,options:[!0,!1]},e.confDefaults.nodeEventToStopPinMode={display:!0,relation:"node",type:"text",val:"contextmenu",options:["none","dblclick","contextmenu"]},e.confDefaults.onNodeContextmenuPreventDefault={display:!0,relation:"node",type:"bool",val:!1,options:[!0,!1]},e.confDefaults.nodeEventToOpenLink={display:!0,relation:"node",type:"text",val:"dblclick",options:["none","click","dblclick","contextmenu"]},e.confDefaults.nodeLinkTarget={display:!0,relation:"node",type:"text",val:"_blank",options:["none","_blank","nodeID","domContainerID"]},e.confDefaults.showLabels={display:!0,relation:"label",type:"bool",val:!0,options:[!0,!1]},e.confDefaults.wrapLabels={display:!0,relation:"label",type:"bool",val:!1,options:[!0,!1]},e.confDefaults.wrappedLabelWidth={display:!0,relation:"label",type:"number",val:80,options:[200,190,180,170,160,150,140,130,120,110,100,90,80,70,60,50,40]},e.confDefaults.wrappedLabelLineHeight={display:!0,relation:"label",type:"number",val:1.2,options:[1.5,1.4,1.3,1.2,1.1,1]},e.confDefaults.labelsCircular={display:!0,relation:"label",type:"bool",val:!1,options:[!0,!1]},e.confDefaults.labelDistance={display:!0,relation:"label",type:"number",val:12,options:[30,28,26,24,22,20,18,16,14,12,10,8,6,4,2]},e.confDefaults.preventLabelOverlappingOnForceEnd={display:!0,relation:"label",type:"bool",val:!1,options:[!0,!1]},e.confDefaults.labelPlacementIterations={display:!0,relation:"label",type:"number",val:250,options:[2e3,1e3,500,250,125]},e.confDefaults.showTooltips={display:!0,relation:"node",type:"bool",val:!0,options:[!0,!1]},e.confDefaults.tooltipPosition={display:!0,relation:"node",type:"text",val:"svgTopRight",options:["node","svgTopLeft","svgTopRight"]},e.confDefaults.alignFixedNodesToGrid={display:!0,relation:"node",type:"bool",val:!1,options:[!0,!1]},e.confDefaults.gridSize={display:!0,relation:"node",type:"number",val:50,options:[150,140,130,120,110,100,90,80,70,60,50,40,30,20,10]},e.confDefaults.linkDistance={display:!0,relation:"link",type:"number",val:80,options:[120,110,100,90,80,70,60,50,40,30,20]},e.confDefaults.showLinkDirection={display:!0,relation:"link",type:"bool",val:!0,options:[!0,!1]},e.confDefaults.showSelfLinks={display:!0,relation:"link",type:"bool",val:!0,options:[!0,!1]},e.confDefaults.selfLinkDistance={display:!0,relation:"link",type:"number",val:20,options:[30,28,26,24,22,20,18,16,14,12,10,8]},e.confDefaults.useDomParentWidth={display:!0,relation:"graph",type:"bool",val:!1,options:[!0,!1]},e.confDefaults.width={display:!0,relation:"graph",type:"number",val:500,options:[1200,1150,1100,1050,1e3,950,900,850,800,750,700,650,600,550,500,450,400,350,300]},e.confDefaults.height={display:!0,relation:"graph",type:"number",val:500,options:[1200,1150,1100,1050,1e3,950,900,850,800,750,700,650,600,550,500,450,400,350,300]},e.confDefaults.setDomParentPaddingToZero={display:!0,relation:"graph",type:"bool",val:!1,options:[!0,!1]},e.confDefaults.showBorder={display:!0,relation:"graph",type:"bool",val:!0,options:[!0,!1]},e.confDefaults.showLegend={display:!0,relation:"graph",type:"bool",val:!0,options:[!0,!1]},e.confDefaults.showLoadingIndicatorOnAjaxCall={display:!0,relation:"graph",type:"bool",val:!0,options:[!0,!1]},e.confDefaults.lassoMode={display:!0,relation:"graph",type:"bool",val:!1,options:[!0,!1]},e.confDefaults.zoomMode={display:!0,relation:"graph",type:"bool",val:!1,options:[!0,!1]},e.confDefaults.minZoomFactor={display:!0,relation:"graph",type:"number",val:.2,options:[1,.9,.8,.7,.6,.5,.4,.3,.2,.1]},e.confDefaults.maxZoomFactor={display:!0,relation:"graph",type:"number",val:5,options:[10,9,8,7,6,5,4,3,2,1]},e.confDefaults.transform={display:!1,relation:"graph",type:"object",val:{translate:[0,0],scale:1}},e.confDefaults.zoomToFitOnForceEnd={display:!0,relation:"graph",type:"bool",val:!1,options:[!0,!1]},e.confDefaults.autoRefresh={display:!0,relation:"graph",type:"bool",val:!1,options:[!0,!1]},e.confDefaults.refreshInterval={display:!0,relation:"graph",type:"number",val:5e3,options:[6e4,3e4,15e3,1e4,5e3,2500]},e.confDefaults.chargeDistance={display:!1,relation:"graph",type:"number",val:1/0,options:[1/0,25600,12800,6400,3200,1600,800,400,200,100],internal:!0},e.confDefaults.charge={display:!0,relation:"graph",type:"number",val:-350,options:[-1e3,-950,-900,-850,-800,-750,-700,-650,-600,-550,-500,-450,-400,-350,-300,-250,-200,-150,-100,-50,0],internal:!0},e.confDefaults.gravity={display:!0,relation:"graph",type:"number",val:.1,options:[1,.95,.9,.85,.8,.75,.7,.65,.6,.55,.5,.45,.4,.35,.3,.25,.2,.15,.1,.05,0],internal:!0},e.confDefaults.linkStrength={display:!0,relation:"graph",type:"number",val:1,options:[1,.95,.9,.85,.8,.75,.7,.65,.6,.55,.5,.45,.4,.35,.3,.25,.2,.15,.1,.05,0],internal:!0},e.confDefaults.friction={display:!0,relation:"graph",type:"number",val:.9,options:[1,.95,.9,.85,.8,.75,.7,.65,.6,.55,.5,.45,.4,.35,.3,.25,.2,.15,.1,.05,0],internal:!0},e.confDefaults.theta={display:!0,relation:"graph",type:"number",val:.8,options:[1,.95,.9,.85,.8,.75,.7,.65,.6,.55,.5,.45,.4,.35,.3,.25,.2,.15,.1,.05,0],internal:!0},e.conf.debug="undefined"!=typeof e.confUser.debug?e.tools.parseBool(e.confUser.debug):!1,e.conf.minNodeRadius=e.confUser.minNodeRadius||e.confDefaults.minNodeRadius.val,e.conf.maxNodeRadius=e.confUser.maxNodeRadius||e.confDefaults.maxNodeRadius.val,e.conf.colorScheme=e.confUser.colorScheme||e.confDefaults.colorScheme.val,e.conf.dragMode="undefined"!=typeof e.confUser.dragMode?e.tools.parseBool(e.confUser.dragMode):e.confDefaults.dragMode.val,e.conf.pinMode="undefined"!=typeof e.confUser.pinMode?e.tools.parseBool(e.confUser.pinMode):e.confDefaults.pinMode.val,e.conf.nodeEventToStopPinMode=e.confUser.nodeEventToStopPinMode||e.confDefaults.nodeEventToStopPinMode.val,e.conf.onNodeContextmenuPreventDefault="undefined"!=typeof e.confUser.onNodeContextmenuPreventDefault?e.tools.parseBool(e.confUser.onNodeContextmenuPreventDefault):e.confDefaults.onNodeContextmenuPreventDefault.val,e.conf.nodeEventToOpenLink=e.confUser.nodeEventToOpenLink||e.confDefaults.nodeEventToOpenLink.val,e.conf.nodeLinkTarget=e.confUser.nodeLinkTarget||e.confDefaults.nodeLinkTarget.val,e.conf.showLabels="undefined"!=typeof e.confUser.showLabels?e.tools.parseBool(e.confUser.showLabels):e.confDefaults.showLabels.val,e.conf.wrapLabels="undefined"!=typeof e.confUser.wrapLabels?e.tools.parseBool(e.confUser.wrapLabels):e.confDefaults.wrapLabels.val,e.conf.wrappedLabelWidth=e.confUser.wrappedLabelWidth||e.confDefaults.wrappedLabelWidth.val,e.conf.wrappedLabelLineHeight=e.confUser.wrappedLabelLineHeight||e.confDefaults.wrappedLabelLineHeight.val,e.conf.labelsCircular="undefined"!=typeof e.confUser.labelsCircular?e.tools.parseBool(e.confUser.labelsCircular):e.confDefaults.labelsCircular.val,e.conf.labelDistance=e.confUser.labelDistance||e.confDefaults.labelDistance.val,e.conf.preventLabelOverlappingOnForceEnd="undefined"!=typeof e.confUser.preventLabelOverlappingOnForceEnd?e.tools.parseBool(e.confUser.preventLabelOverlappingOnForceEnd):e.confDefaults.preventLabelOverlappingOnForceEnd.val,e.conf.labelPlacementIterations=e.confUser.labelPlacementIterations||e.confDefaults.labelPlacementIterations.val,e.conf.showTooltips="undefined"!=typeof e.confUser.showTooltips?e.tools.parseBool(e.confUser.showTooltips):e.confDefaults.showTooltips.val,e.conf.tooltipPosition=e.confUser.tooltipPosition||e.confDefaults.tooltipPosition.val,e.conf.alignFixedNodesToGrid="undefined"!=typeof e.confUser.alignFixedNodesToGrid?e.tools.parseBool(e.confUser.alignFixedNodesToGrid):e.confDefaults.alignFixedNodesToGrid.val,e.conf.gridSize=e.confUser.gridSize&&e.confUser.gridSize>0?e.confUser.gridSize:e.confDefaults.gridSize.val,e.conf.linkDistance=e.confUser.linkDistance||e.confDefaults.linkDistance.val,e.conf.showLinkDirection="undefined"!=typeof e.confUser.showLinkDirection?e.tools.parseBool(e.confUser.showLinkDirection):e.confDefaults.showLinkDirection.val,e.conf.showSelfLinks="undefined"!=typeof e.confUser.showSelfLinks?e.tools.parseBool(e.confUser.showSelfLinks):e.confDefaults.showSelfLinks.val,e.conf.selfLinkDistance=e.confUser.selfLinkDistance||e.confDefaults.selfLinkDistance.val,e.conf.useDomParentWidth="undefined"!=typeof e.confUser.useDomParentWidth?e.tools.parseBool(e.confUser.useDomParentWidth):e.confDefaults.useDomParentWidth.val,e.conf.width=e.confUser.width||e.confDefaults.width.val,e.conf.height=e.confUser.height||e.confDefaults.height.val,e.conf.setDomParentPaddingToZero="undefined"!=typeof e.confUser.setDomParentPaddingToZero?e.tools.parseBool(e.confUser.setDomParentPaddingToZero):e.confDefaults.setDomParentPaddingToZero.val,e.conf.showBorder="undefined"!=typeof e.confUser.showBorder?e.tools.parseBool(e.confUser.showBorder):e.confDefaults.showBorder.val,e.conf.showLegend="undefined"!=typeof e.confUser.showLegend?e.tools.parseBool(e.confUser.showLegend):e.confDefaults.showLegend.val,e.conf.showLoadingIndicatorOnAjaxCall="undefined"!=typeof e.confUser.showLoadingIndicatorOnAjaxCall?e.tools.parseBool(e.confUser.showLoadingIndicatorOnAjaxCall):e.confDefaults.showLoadingIndicatorOnAjaxCall.val,e.conf.lassoMode="undefined"!=typeof e.confUser.lassoMode?e.tools.parseBool(e.confUser.lassoMode):e.confDefaults.lassoMode.val,e.conf.zoomMode="undefined"!=typeof e.confUser.zoomMode?e.tools.parseBool(e.confUser.zoomMode):e.confDefaults.zoomMode.val,e.conf.minZoomFactor=e.confUser.minZoomFactor||e.confDefaults.minZoomFactor.val,e.conf.maxZoomFactor=e.confUser.maxZoomFactor||e.confDefaults.maxZoomFactor.val,e.conf.transform=e.confUser.transform||e.confDefaults.transform.val,e.conf.zoomToFitOnForceEnd="undefined"!=typeof e.confUser.zoomToFitOnForceEnd?e.tools.parseBool(e.confUser.zoomToFitOnForceEnd):e.confDefaults.zoomToFitOnForceEnd.val,e.conf.autoRefresh="undefined"!=typeof e.confUser.autoRefresh?e.tools.parseBool(e.confUser.autoRefresh):e.confDefaults.autoRefresh.val,e.conf.refreshInterval=e.confUser.refreshInterval||e.confDefaults.refreshInterval.val,e.conf.chargeDistance=e.confUser.chargeDistance||1/0,e.conf.charge=e.confUser.charge||e.confDefaults.charge.val,e.conf.gravity=e.confUser.gravity||e.confDefaults.gravity.val,e.conf.linkStrength=e.confUser.linkStrength||e.confDefaults.linkStrength.val,e.conf.friction=e.confUser.friction||e.confDefaults.friction.val,e.conf.theta=e.confUser.theta||e.confDefaults.theta.val,e.conf.onNodeMouseenterFunction=e.confUser.onNodeMouseenterFunction||null,e.conf.onNodeMouseleaveFunction=e.confUser.onNodeMouseleaveFunction||null,e.conf.onNodeClickFunction=e.confUser.onNodeClickFunction||null,e.conf.onNodeDblclickFunction=e.confUser.onNodeDblclickFunction||null,e.conf.onNodeContextmenuFunction=e.confUser.onNodeContextmenuFunction||null,e.conf.onLinkClickFunction=e.confUser.onLinkClickFunction||null,e.conf.onLassoStartFunction=e.confUser.onLassoStartFunction||null,e.conf.onLassoEndFunction=e.confUser.onLassoEndFunction||null,e.data.sampleData='<data><nodes ID="7839" LABEL="KING is THE KING, you know?" LABELCIRCULAR="true" COLORVALUE="10" COLORLABEL="Accounting" SIZEVALUE="5000" LINK="http://apex.oracle.com/" INFOSTRING="This visualization is based on the well known emp table." /><nodes ID="7698" LABEL="BLAKE" COLORVALUE="30" COLORLABEL="Sales" SIZEVALUE="2850" /><nodes ID="7782" LABEL="CLARK" COLORVALUE="10" COLORLABEL="Accounting" SIZEVALUE="2450" /><nodes ID="7566" LABEL="JONES" COLORVALUE="20" COLORLABEL="Research" SIZEVALUE="2975" /><nodes ID="7788" LABEL="SCOTT with a very long label" COLORVALUE="20" COLORLABEL="Research" SIZEVALUE="3000" /><nodes ID="7902" LABEL="FORD" COLORVALUE="20" COLORLABEL="Research" SIZEVALUE="3000" /><nodes ID="7369" LABEL="SMITH" COLORVALUE="20" COLORLABEL="Research" SIZEVALUE="800" /><nodes ID="7499" LABEL="ALLEN" COLORVALUE="30" COLORLABEL="Sales" SIZEVALUE="1600" /><nodes ID="7521" LABEL="WARD" COLORVALUE="30" COLORLABEL="Sales" SIZEVALUE="1250" /><nodes ID="7654" LABEL="MARTIN" COLORVALUE="30" COLORLABEL="Sales" SIZEVALUE="1250" /><nodes ID="7844" LABEL="TURNER" COLORVALUE="30" COLORLABEL="Sales" SIZEVALUE="1500" /><nodes ID="7876" LABEL="ADAMS" COLORVALUE="20" COLORLABEL="Research" SIZEVALUE="1100" /><nodes ID="7900" LABEL="JAMES" COLORVALUE="30" COLORLABEL="Sales" SIZEVALUE="950" /><nodes ID="7934" LABEL="MILLER" COLORVALUE="10" COLORLABEL="Accounting" SIZEVALUE="1300" /><nodes ID="8888" LABEL="Who am I?" COLORVALUE="green" COLORLABEL="unspecified" SIZEVALUE="2000" LINK="https://github.com/ogobrecht/d3-force-apex-plugin/wiki/API-Reference#nodelinktarget" INFOSTRING="This is a good question. Think about it." /><nodes ID="9999" LABEL="Where I am?" COLORVALUE="#f00" COLORLABEL="unspecified" SIZEVALUE="1000" LINK="https://github.com/ogobrecht/d3-force-apex-plugin/wiki/API-Reference#nodelinktarget" INFOSTRING="This is a good question. What do you think?" /><links FROMID="7839" TOID="7839" STYLE="dotted" COLOR="blue" INFOSTRING="This is a self link (same source and target node) rendered along a path with the STYLE attribute set to dotted and COLOR attribute set to blue." /><links FROMID="7698" TOID="7839" STYLE="dashed" /><links FROMID="7782" TOID="7839" STYLE="dashed" COLOR="red" INFOSTRING="This is a link with the STYLE attribute set to dashed and COLOR attribute set to red." /><links FROMID="7566" TOID="7839" STYLE="dashed" /><links FROMID="7788" TOID="7566" STYLE="solid" /><links FROMID="7902" TOID="7566" STYLE="solid" /><links FROMID="7369" TOID="7902" STYLE="solid" /><links FROMID="7499" TOID="7698" STYLE="solid" /><links FROMID="7521" TOID="7698" STYLE="solid" /><links FROMID="7654" TOID="7698" STYLE="solid" /><links FROMID="7844" TOID="7698" STYLE="solid" /><links FROMID="7876" TOID="7788" STYLE="solid" /><links FROMID="7900" TOID="7698" STYLE="solid" /><links FROMID="7934" TOID="7782" STYLE="solid" /></data>',e.status.userAgent=navigator.userAgent,e.status.userAgentIe9To11=!1,(-1!==navigator.appVersion.indexOf("MSIE 9")||-1!==navigator.appVersion.indexOf("MSIE 10")||-1!==e.status.userAgent.indexOf("Trident")&&-1!==e.status.userAgent.indexOf("rv:11"))&&(e.status.userAgentIe9To11=!0,e.tools.logError("Houston, we have a problem - user agent is IE 9, 10 or 11 - we have to provide a fix for markers: http://stackoverflow.com/questions/15588478/internet-explorer-10-not-showing-svg-path-d3-js-graph"))},e.main.setupDom=function(){e.dom.body=d3.select("body"),null===document.querySelector("#"+e.dom.containerId)?e.dom.container=e.dom.body.append("div").attr("id",e.dom.containerId):(e.dom.container=d3.select("#"+e.dom.containerId),d3.selectAll("#"+e.dom.containerId+"_tooltip, #"+e.dom.containerId+"_customizing").remove()),null===document.querySelector("#"+e.dom.containerId+" svg")?e.dom.svg=e.dom.container.append("svg"):(e.dom.svg=d3.select("#"+e.dom.containerId+" svg"),d3.selectAll("#"+e.dom.containerId+" svg *").remove()),e.dom.svgParent=d3.select(e.dom.svg.node().parentNode),e.conf.setDomParentPaddingToZero&&e.dom.svgParent.style("padding","0"),e.dom.svg.attr("class","net_gobrechts_d3_force").classed("border",e.conf.showBorder).attr("width",e.conf.width).attr("height",e.conf.height),e.dom.containerWidth=e.tools.getSvgParentInnerWidth(),e.conf.useDomParentWidth&&e.dom.svg.attr("width",e.dom.containerWidth),e.dom.defs=e.dom.svg.append("defs"),e.dom.graphOverlay=e.dom.svg.append("g").attr("class","graphOverlay"),e.dom.graphOverlaySizeHelper=e.dom.graphOverlay.append("rect").attr("class","graphOverlaySizeHelper"),e.dom.graph=e.dom.graphOverlay.append("g").attr("class","graph"),e.dom.legend=e.dom.svg.append("g").attr("class","legend"),e.dom.loading=e.dom.svg.append("svg:g").attr("class","loading").style("display","none"),e.dom.loadingRect=e.dom.loading.append("svg:rect").attr("width",e.tools.getGraphWidth()).attr("height",e.conf.height),e.dom.loadingText=e.dom.loading.append("svg:text").attr("x",e.tools.getGraphWidth()/2).attr("y",e.conf.height/2).text("Loading..."),e.dom.defs.append("svg:marker").attr("id",e.dom.containerId+"_highlighted").attr("class","highlighted").attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerWidth",5).attr("markerHeight",5).attr("orient","auto").attr("markerUnits","strokeWidth").append("svg:path").attr("d","M0,0 L10,5 L0,10"),e.dom.defs.append("svg:marker").attr("id",e.dom.containerId+"_normal").attr("class","normal").attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerWidth",5).attr("markerHeight",5).attr("orient","auto").attr("markerUnits","strokeWidth").append("svg:path").attr("d","M0,0 L10,5 L0,10"),null===document.querySelector("#"+e.dom.containerId+"_tooltip")?e.dom.tooltip=e.dom.body.append("div").attr("id",e.dom.containerId+"_tooltip").attr("class","net_gobrechts_d3_force_tooltip").style("top","0px").style("left","0px"):e.dom.tooltip=d3.select("#"+e.dom.containerId+"_tooltip")},e.main.setupFunctionReferences=function(){e.main.force=d3.layout.force().on("start",function(){e.tools.log("Force started."),e.status.customize&&e.dom.customizePositions&&e.dom.customizePositions.text("Force started - wait for end event to show positions..."),e.status.forceTickCounter=0,e.status.forceStartTime=(new Date).getTime(),e.status.forceRunning=!0}).on("tick",function(){e.status.forceTickCounter+=1,e.status.userAgentIe9To11&&e.conf.showLinkDirection&&(e.main.links.each(function(){this.parentNode.insertBefore(this,this)}),e.main.selfLinks.each(function(){this.parentNode.insertBefore(this,this)})),e.main.selfLinks.attr("transform",function(a){return"translate("+a.source.x+","+a.source.y+")"}),e.main.links.attr("x1",function(a){return e.tools.adjustSourceX(a)}).attr("y1",function(a){return e.tools.adjustSourceY(a)}).attr("x2",function(a){return e.tools.adjustTargetX(a)}).attr("y2",function(a){return e.tools.adjustTargetY(a)}),e.conf.showLabels&&(e.main.labels.attr("x",function(a){return a.x}).attr("y",function(a){return a.y-a.radius-e.conf.labelDistance}),e.status.wrapLabelsOnNextTick&&(e.main.labels.call(e.tools.wrapLabels,e.conf.wrappedLabelWidth),e.status.wrapLabelsOnNextTick=!1),e.conf.wrapLabels&&e.main.labels.each(function(){var a=d3.select(this),b=a.attr("y")-(a.attr("lines")-1)*e.status.labelFontSize*e.conf.wrappedLabelLineHeight;a.attr("y",b).selectAll("tspan").attr("x",a.attr("x")).attr("y",b)}),e.main.labelPaths.attr("transform",function(a){return"translate("+a.x+","+a.y+")"})),e.main.nodes.attr("cx",function(a){return a.x}).attr("cy",function(a){return a.y})}).on("end",function(){e.conf.showLabels&&e.conf.preventLabelOverlappingOnForceEnd&&(e.data.simulatedAnnealingLabels=[],e.data.simulatedAnnealingAnchors=[],e.main.labels.each(function(a,b){var c=d3.select(this);e.data.simulatedAnnealingLabels[b]={width:this.getBBox().width,height:this.getBBox().height,x:a.x,y:c.attr("y")-(c.attr("lines")-1)*e.status.labelFontSize*e.conf.wrappedLabelLineHeight}}),e.main.nodes.filter(function(a){return!a.LABELCIRCULAR&&!e.conf.labelsCircular}).each(function(a,b){e.data.simulatedAnnealingAnchors[b]={x:a.x,y:a.y-a.radius-e.conf.labelDistance,r:.5}}),e.lib.labelerPlugin().label(e.data.simulatedAnnealingLabels).anchor(e.data.simulatedAnnealingAnchors).width(e.tools.getGraphWidth()).height(e.conf.height).start(e.conf.labelPlacementIterations),e.main.labels.each(function(a,b){var c=d3.select(this),d=e.data.simulatedAnnealingLabels[b].x,f=e.data.simulatedAnnealingLabels[b].y;e.conf.wrapLabels?(f-=(c.attr("lines")-1)*e.status.labelFontSize*e.conf.wrappedLabelLineHeight,c.transition().duration(800).attr("x",d).attr("y",f).selectAll("tspan").attr("x",d).attr("y",f)):c.transition().duration(800).attr("x",d).attr("y",f)})),e.conf.zoomToFitOnForceEnd&&e.conf.zoomMode&&f.zoomToFit(),e.status.forceRunning=!1;var a=(new Date).getTime()-e.status.forceStartTime,b=(a/1e3).toFixed(1),c=Math.round(e.status.forceTickCounter/(a/1e3)),d=Math.round(a/e.status.forceTickCounter);e.status.customize&&e.dom.customizePositions&&e.dom.customizePositions.text(JSON.stringify(f.positions())),e.tools.log("Force ended."),e.tools.log(b+" seconds, "+e.status.forceTickCounter+" ticks to cool down ("+c+" ticks/s, "+d+" ms/tick).")}),e.main.drag=e.main.force.drag(),e.main.lasso=e.lib.lassoPlugin().closePathDistance(100).closePathSelect(!0).hoverSelect(!0).area(e.dom.graphOverlay).pathContainer(e.dom.svg),e.main.zoom=d3.behavior.zoom(),e.main.zoomed=function(){e.conf.transform={translate:e.main.zoom.translate(),scale:e.main.zoom.scale()},e.dom.graph.attr("transform","translate("+e.main.zoom.translate()+")scale("+e.main.zoom.scale()+")"),e.tools.writeConfObjectIntoWizard()},e.main.interpolateZoom=function(a,b,c){return e.conf.zoomMode&&e.status.graphStarted?(b<e.conf.minZoomFactor?b=e.conf.minZoomFactor:b>e.conf.maxZoomFactor&&(b=e.conf.maxZoomFactor),d3.transition().duration(c).tween("zoom",function(){var c=d3.interpolate(e.main.zoom.translate(),a),d=d3.interpolate(e.main.zoom.scale(),b);return function(a){e.main.zoom.scale(d(a)).translate(c(a)),e.main.zoomed()}})):void 0}},e.tools.parseBool=function(a){switch(String(a).trim().toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case"":return!1;default:return!1}},e.tools.parseXml=function(a){var b=null;if(a)if(window.DOMParser)try{b=(new DOMParser).parseFromString(a,"text/xml")}catch(c){b=null,e.tools.logError("DOMParser - unable to parse XML: "+c.message)}else if(window.ActiveXObject)try{b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)||e.tools.logError("Microsoft.XMLDOM - unable to parse XML: "+b.parseError.reason+b.parseError.srcText)}catch(c){b=null,e.tools.logError("Microsoft.XMLDOM - unable to parse XML: "+c.message)}return b},e.tools.xmlToJson=function(a){var b,c,d,e,f,g=null,h=function(a){if(b={},a.attributes.length>0)for(var c=0;c<a.attributes.length;c++)f=a.attributes.item(c),b[f.nodeName]=f.nodeValue;if(a.hasChildNodes())for(var e=0;e<a.childNodes.length;e++)d=a.childNodes.item(e),d.hasChildNodes()?b[d.nodeName]=d.childNodes.item(0).nodeValue:b[d.nodeName]="";return b};if(a&&(g={},g.data={},g.data.nodes=[],g.data.links=[],a.childNodes.item(0).hasChildNodes()))for(var i=0;i<a.childNodes.item(0).childNodes.length;i++)b=null,c=a.childNodes.item(0).childNodes.item(i),e=c.nodeName,"nodes"===e||"node"===e?g.data.nodes.push(h(c)):("links"===e||"link"===e)&&g.data.links.push(h(c));return g},e.tools.getSvgParentInnerWidth=function(){return parseInt(e.dom.svgParent.style("width"))-parseInt(e.dom.svgParent.style("padding-left"))-parseInt(e.dom.svgParent.style("padding-right"))-2*(e.dom.svg.style("border-width")?parseInt(e.dom.svg.style("border-width")):1)},e.tools.getGraphWidth=function(){return e.conf.useDomParentWidth?e.dom.containerWidth:e.conf.width},e.tools.log=function(a,b){e.conf.debug&&(b?console.log(a):console.log(e.status.debugPrefix+a)),e.status.customize&&e.dom.customizeLog&&e.dom.customizeLog.text(a+"\n"+e.dom.customizeLog.text())},e.tools.logError=function(a){console.log(e.status.debugPrefix+"ERROR: "+a),e.status.customize&&e.dom.customizeLog&&e.dom.customizeLog.text("ERROR: "+a+"\n"+e.dom.customizeLog.text())},e.tools.triggerApexEvent=function(a,b,c){e.status.apexPluginId&&apex.event.trigger(a,b,c)},e.tools.setRadiusFunction=function(){e.tools.radius=d3.scale.sqrt().range([e.conf.minNodeRadius,e.conf.maxNodeRadius]).domain(d3.extent(e.data.nodes,function(a){return parseFloat(a.SIZEVALUE)}))},e.tools.setColorFunction=function(){"color20"===e.conf.colorScheme?e.tools.color=d3.scale.category20():"color20b"===e.conf.colorScheme?e.tools.color=d3.scale.category20b():"color20c"===e.conf.colorScheme?e.tools.color=d3.scale.category20c():"color10"===e.conf.colorScheme?e.tools.color=d3.scale.category10():"direct"===e.conf.colorScheme?e.tools.color=function(a){return a}:(e.conf.colorScheme="color20",e.tools.color=d3.scale.category20())},e.tools.neighboring=function(a,b){return e.data.neighbors.indexOf(a.ID+":"+b.ID)>-1||e.data.neighbors.indexOf(b.ID+":"+a.ID)>-1},e.tools.getNearestGridPosition=function(a,b){var c,d;return e.conf.zoomMode?(c=a%e.conf.gridSize,d=c>e.conf.gridSize/2?a-c+e.conf.gridSize:a-c):a>=b?(c=b%e.conf.gridSize,d=b-c,d===b&&(d-=e.conf.gridSize)):a<=e.conf.gridSize/2?d=e.conf.gridSize:(c=a%e.conf.gridSize,d=c>e.conf.gridSize/2?a-c+e.conf.gridSize:a-c,d>=b&&(d-=e.conf.gridSize)),d},e.tools.adjustSourceX=function(a){return a.source.x+Math.cos(e.tools.calcAngle(a))*a.source.radius},e.tools.adjustSourceY=function(a){return a.source.y+Math.sin(e.tools.calcAngle(a))*a.source.radius},e.tools.adjustTargetX=function(a){return a.target.x-Math.cos(e.tools.calcAngle(a))*a.target.radius},e.tools.adjustTargetY=function(a){return a.target.y-Math.sin(e.tools.calcAngle(a))*a.target.radius},e.tools.calcAngle=function(a){return Math.atan2(a.target.y-a.source.y,a.target.x-a.source.x)},e.tools.getSelfLinkPath=function(a){var b=a.source.radius,c=a.source.radius+e.conf.selfLinkDistance,d=0,f=0,g={source:{x:0,y:0,radius:b},target:{x:d+c/2,y:f+c,radius:b}},h={source:{x:d-c/2,y:f+c,radius:b},target:{x:d,y:f,radius:b}},i="M"+e.tools.adjustSourceX(g)+","+e.tools.adjustSourceY(g);return i+=" L"+(d+c/2)+","+(f+c),i+=" A"+c+","+c+" 0 0,1 "+(d-c/2)+","+(f+c),i+=" L"+e.tools.adjustTargetX(h)+","+e.tools.adjustTargetY(h)},e.tools.getLabelPath=function(a){var b=a.radius+e.conf.labelDistance,c=0,d=0,f="M"+(c-b)+","+d;return f+=" a"+b+","+b+" 0 0,1 "+2*b+",0",f+=" a"+b+","+b+" 0 0,1 -"+2*b+",0"},e.tools.openLink=function(a){var b;"none"===e.conf.nodeLinkTarget?window.location.assign(a.LINK):"nodeID"===e.conf.nodeLinkTarget?(b=window.open(a.LINK,a.ID),b.focus()):"domContainerID"===e.conf.nodeLinkTarget?(b=window.open(a.LINK,e.dom.containerId),b.focus()):(b=window.open(a.LINK,e.conf.nodeLinkTarget),b.focus())},e.tools.applyConfigurationObject=function(a){var b;for(b in a)a.hasOwnProperty(b)&&e.conf.hasOwnProperty(b)&&a[b]!==e.conf[b]&&f[b](a[b])},e.tools.zoomEventProxy=function(a){return function(){e.conf.dragMode&&(!e.conf.dragMode||"circle"===d3.event.target.tagName)||!e.conf.zoomMode||d3.event.altKey||d3.event.shiftKey||a.apply(this,arguments)}},e.tools.lassoEventProxy=function(a){return function(){e.conf.dragMode&&"circle"===d3.event.target.tagName||!e.conf.lassoMode||e.conf.zoomMode&&!d3.event.altKey&&!d3.event.shiftKey||a.apply(this,arguments)}},e.tools.showTooltip=function(a){var b;e.dom.tooltip.html(a).style("display","block"),"svgTopLeft"===e.conf.tooltipPosition?(b=e.tools.getOffsetRect(e.dom.svg.node()),e.dom.tooltip.style("top",b.top+(e.dom.svg.style("border-width")?parseInt(e.dom.svg.style("border-width")):1)+"px").style("left",b.left+(e.dom.svg.style("border-width")?parseInt(e.dom.svg.style("border-width")):1)+"px")):"svgTopRight"===e.conf.tooltipPosition?(b=e.tools.getOffsetRect(e.dom.svg.node()),e.dom.tooltip.style("top",b.top+parseInt(e.dom.svg.style("border-width")?parseInt(e.dom.svg.style("border-width")):1)+"px").style("left",b.left+parseInt(e.dom.svg.style("width"))+parseInt(e.dom.svg.style("border-width")?parseInt(e.dom.svg.style("border-width")):1)-parseInt(e.dom.tooltip.style("width"))-2*parseInt(e.dom.tooltip.style("border-width")?parseInt(e.dom.tooltip.style("border-width")):0)-parseInt(e.dom.tooltip.style("padding-left"))-parseInt(e.dom.tooltip.style("padding-right"))+"px")):e.dom.tooltip.style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY+"px")},e.tools.hideTooltip=function(){e.dom.tooltip.style("display","none")},e.tools.onLinkClick=function(a){return d3.event.defaultPrevented?null:(e.tools.log("Event link_click triggered."),e.tools.triggerApexEvent(this,"net_gobrechts_d3_force_linkclick",a),"function"==typeof e.conf.onLinkClickFunction&&e.conf.onLinkClickFunction.call(this,d3.event,a),void 0)},e.tools.getMarkerUrl=function(a){return e.conf.showLinkDirection?"url(#"+e.dom.containerId+"_"+(a.COLOR?a.COLOR:"normal")+")":null},e.tools.getMarkerUrlHighlighted=function(){return e.conf.showLinkDirection?"url(#"+e.dom.containerId+"_highlighted)":null},e.tools.onLinkMouseenter=function(a){e.conf.showTooltips&&a.INFOSTRING&&e.tools.showTooltip(a.INFOSTRING)},e.tools.onLinkMouseleave=function(){e.conf.showTooltips&&e.tools.hideTooltip()},e.tools.onNodeMouseenter=function(a){e.main.nodes.classed("highlighted",function(b){return e.tools.neighboring(b,a)}),e.main.links.classed("highlighted",function(b){return b.source.ID===a.ID||b.target.ID===a.ID}).style("marker-end",function(b){return b.source.ID===a.ID||b.target.ID===a.ID?e.tools.getMarkerUrlHighlighted(b):e.tools.getMarkerUrl(b)}),e.main.selfLinks.classed("highlighted",function(b){return b.FROMID===a.ID}).style("marker-end",function(b){return b.source.ID===a.ID||b.target.ID===a.ID?e.tools.getMarkerUrlHighlighted(b):e.tools.getMarkerUrl(b)}),e.conf.showLabels&&(e.main.labels.classed("highlighted",function(b){return b.ID===a.ID}),e.main.labelsCircular.classed("highlighted",function(b){return b.ID===a.ID})),d3.select(this).classed("highlighted",!0),e.tools.log("Event node_mouseenter triggered."),e.tools.triggerApexEvent(this,"net_gobrechts_d3_force_mouseenter",a),"function"==typeof e.conf.onNodeMouseenterFunction&&e.conf.onNodeMouseenterFunction.call(this,d3.event,a),e.conf.showTooltips&&a.INFOSTRING&&e.tools.showTooltip(a.INFOSTRING)},e.tools.onNodeMouseleave=function(a){e.main.nodes.classed("highlighted",!1),e.main.links.classed("highlighted",!1).style("marker-end",e.tools.getMarkerUrl),e.main.selfLinks.classed("highlighted",!1).style("marker-end",e.tools.getMarkerUrl),e.conf.showLabels&&(e.main.labels.classed("highlighted",!1),e.main.labelsCircular.classed("highlighted",!1)),e.tools.log("Event node_mouseleave triggered."),e.tools.triggerApexEvent(this,"net_gobrechts_d3_force_mouseleave",a),"function"==typeof e.conf.onNodeMouseleaveFunction&&e.conf.onNodeMouseleaveFunction.call(this,d3.event,a),e.conf.showTooltips&&e.tools.hideTooltip()},e.tools.onNodeClick=function(a){return d3.event.defaultPrevented?null:(a.LINK&&"click"===e.conf.nodeEventToOpenLink&&e.tools.openLink(a),"click"===e.conf.nodeEventToStopPinMode&&d3.select(this).classed("fixed",a.fixed=0),e.tools.log("Event node_click triggered."),e.tools.triggerApexEvent(this,"net_gobrechts_d3_force_click",a),"function"==typeof e.conf.onNodeClickFunction&&e.conf.onNodeClickFunction.call(this,d3.event,a),void 0)},e.tools.onNodeDblclick=function(a){a.LINK&&"dblclick"===e.conf.nodeEventToOpenLink&&e.tools.openLink(a),"dblclick"===e.conf.nodeEventToStopPinMode&&d3.select(this).classed("fixed",a.fixed=0),e.tools.log("Event node_dblclick triggered."),e.tools.triggerApexEvent(this,"net_gobrechts_d3_force_dblclick",a),"function"==typeof e.conf.onNodeDblclickFunction&&e.conf.onNodeDblclickFunction.call(this,d3.event,a)},e.tools.onNodeContextmenu=function(a){
e.conf.onNodeContextmenuPreventDefault&&d3.event.preventDefault(),a.LINK&&"contextmenu"===e.conf.nodeEventToOpenLink&&e.tools.openLink(a),"contextmenu"===e.conf.nodeEventToStopPinMode&&d3.select(this).classed("fixed",a.fixed=0),e.tools.log("Event node_contextmenu triggered."),e.tools.triggerApexEvent(this,"net_gobrechts_d3_force_contextmenu",a),"function"==typeof e.conf.onNodeContextmenuFunction&&e.conf.onNodeContextmenuFunction.call(this,d3.event,a)},e.tools.onLassoStart=function(a){var b={};b.numberOfSelectedNodes=0,b.idsOfSelectedNodes=null,b.numberOfNodes=a.size(),b.nodes=a,e.tools.log("Event lasso_start triggered."),e.tools.triggerApexEvent(document.querySelector("#"+e.dom.containerId),"net_gobrechts_d3_force_lassostart",b),"function"==typeof e.conf.onLassoStartFunction&&e.conf.onLassoStartFunction.call(e.dom.svg,d3.event,b)},e.tools.onLassoEnd=function(a){var b={};b.numberOfSelectedNodes=0,b.idsOfSelectedNodes="",b.numberOfNodes=a.size(),b.nodes=a,a.each(function(a){a.selected&&(b.idsOfSelectedNodes+=a.ID+":",b.numberOfSelectedNodes++)}),b.idsOfSelectedNodes=b.idsOfSelectedNodes.length>0?b.idsOfSelectedNodes.substr(0,b.idsOfSelectedNodes.length-1):null,e.tools.log("Event lasso_end triggered."),e.tools.triggerApexEvent(document.querySelector("#"+e.dom.containerId),"net_gobrechts_d3_force_lassoend",b),"function"==typeof e.conf.onLassoEndFunction&&e.conf.onLassoEndFunction.call(e.dom.svg,d3.event,b)},e.tools.getOffsetRect=function(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{top:Math.round(i),left:Math.round(j)}},e.tools.createLegend=function(){e.data.distinctNodeColorValues.forEach(function(a,b){var c=a.split(";");e.dom.legend.append("circle").attr("cx",11).attr("cy",e.conf.height-(14*(b+1)-3)).attr("r",6).attr("fill",e.tools.color(c[1])),e.dom.legend.append("text").attr("x",21).attr("y",e.conf.height-(14*(b+1)-6)).text(c[0]?c[0]:c[1])})},e.tools.removeLegend=function(){e.dom.legend.selectAll("*").remove()},e.tools.writeConfObjectIntoWizard=function(){e.status.customize&&e.dom.customizeConfObject.text(JSON.stringify(f.optionsCustomizationWizard(),null,"  "))},e.tools.createCustomizeLink=function(){!e.status.customize&&(e.conf.debug||document.querySelector("#apex-dev-toolbar")||document.querySelector("#apexDevToolbar"))&&null===document.querySelector("#"+e.dom.containerId+" svg text.link")&&e.dom.svg.append("svg:text").attr("class","link").attr("x",5).attr("y",15).attr("text-anchor","start").text("Customize Me").on("click",function(){f.customize(!0)})},e.tools.removeCustomizeLink=function(){e.dom.svg.select("#"+e.dom.containerId+" svg text.link").remove()},e.tools.customizeDrag=d3.behavior.drag().on("dragstart",function(){var a=d3.mouse(document.body);e.dom.customizePosition=e.tools.getOffsetRect(document.querySelector("#"+e.dom.containerId+"_customizing")),e.dom.customizePosition.mouseLeft=a[0]-e.dom.customizePosition.left,e.dom.customizePosition.mouseTop=a[1]-e.dom.customizePosition.top}).on("drag",function(){var a=d3.mouse(document.body);e.dom.customize.style("left",Math.max(0,a[0]-e.dom.customizePosition.mouseLeft)+"px").style("top",Math.max(0,a[1]-e.dom.customizePosition.mouseTop)+"px")}).on("dragend",function(){e.dom.customizePosition=e.tools.getOffsetRect(e.dom.customize.node())}),e.tools.createCustomizeWizardIfNotRendering=function(){e.status.customize&&!e.status.graphRendering&&e.tools.createCustomizeWizard()},e.tools.createCustomizeWizard=function(){var a,b,c,d,g,h,i,j,k,l=4,m=function(){f.releaseFixedNodes().resume()},n=function(){e.status.customizeCurrentTabPosition=this.id,"text"===e.confDefaults[this.name].type?f[this.name](this.options[this.selectedIndex].value).render():"number"===e.confDefaults[this.name].type?f[this.name](parseFloat(this.options[this.selectedIndex].value)).render():"bool"===e.confDefaults[this.name].type&&f[this.name]("true"===this.options[this.selectedIndex].value).render()},o=function(a){e.confDefaults[a].options.forEach(function(b){i=b,h.append("option").attr("value",b).attr("selected",function(){return"text"===e.confDefaults[a].type||"bool"===e.confDefaults[a].type?i===e.conf[a]?(j=!0,"selected"):null:"number"===e.confDefaults[a].type?parseFloat(i)===e.conf[a]?(j=!0,"selected"):null:void 0}).text(b)})};if(e.status.customize){e.tools.removeCustomizeLink(),e.dom.customizePosition||(e.dom.customizePosition=e.tools.getOffsetRect(e.dom.svg.node()),e.dom.customizePosition.top=e.dom.customizePosition.top+100,e.dom.customizePosition.left=e.dom.customizePosition.left+200),null!==document.querySelector("#"+e.dom.containerId+"_customizing")&&e.dom.customize.remove(),e.dom.customize=e.dom.body.insert("div").attr("id",e.dom.containerId+"_customizing").attr("class","net_gobrechts_d3_force_customize").style("left",e.dom.customizePosition.left+"px").style("top",e.dom.customizePosition.top+"px"),e.dom.customize.append("span").attr("class","drag").call(e.tools.customizeDrag).append("span").attr("class","title").text('Customize "'+e.dom.containerId+'"'),e.dom.customize.append("a").attr("class","close focus").attr("tabindex",1).text("Close").on("click",function(){e.status.customize=!1,e.tools.removeCustomizeWizard(),e.tools.createCustomizeLink()}).on("keydown",function(){13===d3.event.keyCode&&(e.status.customize=!1,e.tools.removeCustomizeWizard(),e.tools.createCustomizeLink())}),a=e.dom.customize.append("table"),b=a.append("tr"),c=b.append("td").style("vertical-align","top"),e.dom.customizeMenu=c.append("span"),e.dom.customizeOptionsTable=c.append("table");for(k in e.confDefaults)e.confDefaults.hasOwnProperty(k)&&e.confDefaults[k].display&&(l+=1,d=e.dom.customizeOptionsTable.append("tr").attr("class",e.confDefaults[k].relation+"-related"),d.append("td").attr("class","label").html('<a href="https://ogobrecht.github.io/d3-force-apex-plugin/module-API.html#.'+k+'" target="github_d3_force" tabindex="'+l+'100">'+k+"</a>"),g=d.append("td"),h=g.append("select").attr("id",e.dom.containerId+"_"+k).attr("name",k).attr("value",e.conf[k]).attr("tabindex",l+1).classed("warning",e.confDefaults[k].internal).on("change",n),j=!1,o(k),j||(h.append("option").attr("value",e.conf[k]).attr("selected","selected").text(e.conf[k]),e.confDefaults[k].options.push(e.conf[k])),"pinMode"===k&&g.append("a").text(" release all").attr("href",null).on("click",m));e.dom.customizeOptionsTable.style("width",d3.select(e.dom.customizeOptionsTable).node()[0][0].clientWidth+"px"),c.append("span").html("<br>"),c=b.append("td").style("vertical-align","top").style("padding-left","5px"),c.append("span").html('Your Configuration Object<p style="font-size:10px;margin:0;">'+(e.status.apexPluginId?"To save your options please copy<br>this to your plugin region attributes.<br>Only non-default options are shown.</p>":"Use this to initialize your graph.<br>Only non-default options are shown.</p>")),e.dom.customizeConfObject=c.append("textarea").attr("tabindex",l+5).attr("readonly","readonly"),c.append("span").html("<br><br>Current Positions<br>"),e.dom.customizePositions=c.append("textarea").attr("tabindex",l+6).attr("readonly","readonly").text(e.status.forceRunning?"Force started - wait for end event to show positions...":JSON.stringify(f.positions())),c.append("span").html("<br><br>Debug Log (descending)<br>"),e.dom.customizeLog=c.append("textarea").attr("tabindex",l+7).attr("readonly","readonly"),b=a.append("tr"),c=b.append("td").attr("colspan",2).html("Copyrights:"),b=a.append("tr"),c=b.append("td").attr("colspan",2).html('<table><tr><td style="padding-right:20px;"><a href="https://github.com/ogobrecht/d3-force-apex-plugin" target="_blank" tabindex="'+(l+8)+'">D3 Force APEX Plugin</a> ('+e.version+')<br>Ottmar Gobrecht</td><td style="padding-right:20px;"><a href="https://github.com/mbostock/d3" target="d3js_org" tabindex="'+(l+9)+'">D3.js</a> ('+d3.version+') and <a href="https://github.com/d3/d3-plugins/tree/master/lasso" target="_blank" tabindex="'+(l+10)+'">D3 Lasso Plugin</a> (modified)<br>Mike Bostock</td></tr><tr><td colspan="3"><a href="https://github.com/tinker10/D3-Labeler" target="github_d3_labeler" tabindex="'+(l+11)+'">D3 Labeler Plugin</a> (automatic label placement using simulated annealing)<br>Evan Wang</td></tr></table>'),e.tools.createCustomizeMenu(e.status.customizeCurrentMenu),e.tools.writeConfObjectIntoWizard(),e.status.customizeCurrentTabPosition&&document.getElementById(e.status.customizeCurrentTabPosition).focus()}else e.tools.removeCustomizeWizard(),e.tools.createCustomizeLink()},e.tools.removeCustomizeWizard=function(){d3.select("#"+e.dom.containerId+"_customizing").remove()},e.tools.createCustomizeMenu=function(a){e.status.customizeCurrentMenu=a,e.dom.customizeMenu.selectAll("*").remove(),e.dom.customizeMenu.append("span").text("Show options for:"),"nodes"===e.status.customizeCurrentMenu?(e.dom.customizeMenu.append("span").style("font-weight","bold").style("margin-left","10px").text("NODES"),e.dom.customizeOptionsTable.selectAll("tr.node-related").classed("hidden",!1),e.dom.customizeOptionsTable.selectAll("tr.label-related,tr.link-related,tr.graph-related").classed("hidden",!0)):e.dom.customizeMenu.append("a").style("font-weight","bold").style("margin-left","10px").text("NODES").attr("tabindex",2).on("click",function(){e.tools.createCustomizeMenu("nodes"),e.dom.customizeOptionsTable.selectAll("tr.node-related").classed("hidden",!1),e.dom.customizeOptionsTable.selectAll("tr.label-related,tr.link-related,tr.graph-related").classed("hidden",!0)}).on("keydown",function(){13===d3.event.keyCode&&(e.tools.createCustomizeMenu("nodes"),e.dom.customizeOptionsTable.selectAll("tr.node-related").classed("hidden",!1),e.dom.customizeOptionsTable.selectAll("tr.label-related,tr.link-related,tr.graph-related").classed("hidden",!0))}),"labels"===e.status.customizeCurrentMenu?(e.dom.customizeMenu.append("span").style("font-weight","bold").style("margin-left","10px").text("LABELS"),e.dom.customizeOptionsTable.selectAll("tr.label-related").classed("hidden",!1),e.dom.customizeOptionsTable.selectAll("tr.node-related,tr.link-related,tr.graph-related").classed("hidden",!0)):e.dom.customizeMenu.append("a").style("font-weight","bold").style("margin-left","10px").text("LABELS").attr("tabindex",2).on("click",function(){e.tools.createCustomizeMenu("labels"),e.dom.customizeOptionsTable.selectAll("tr.label-related").classed("hidden",!1),e.dom.customizeOptionsTable.selectAll("tr.node-related,tr.link-related,tr.graph-related").classed("hidden",!0)}).on("keydown",function(){13===d3.event.keyCode&&(e.tools.createCustomizeMenu("labels"),e.dom.customizeOptionsTable.selectAll("tr.label-related").classed("hidden",!1),e.dom.customizeOptionsTable.selectAll("tr.node-related,tr.link-related,tr.graph-related").classed("hidden",!0))}),"links"===e.status.customizeCurrentMenu?(e.dom.customizeMenu.append("span").style("font-weight","bold").style("margin-left","10px").text("LINKS"),e.dom.customizeOptionsTable.selectAll("tr.link-related").classed("hidden",!1),e.dom.customizeOptionsTable.selectAll("tr.node-related,tr.label-related,tr.graph-related").classed("hidden",!0)):e.dom.customizeMenu.append("a").style("font-weight","bold").style("margin-left","10px").text("LINKS").attr("tabindex",3).on("click",function(){e.tools.createCustomizeMenu("links"),e.dom.customizeOptionsTable.selectAll("tr.link-related").classed("hidden",!1),e.dom.customizeOptionsTable.selectAll("tr.node-related,tr.label-related,tr.graph-related").classed("hidden",!0)}).on("keydown",function(){13===d3.event.keyCode&&(e.tools.createCustomizeMenu("links"),e.dom.customizeOptionsTable.selectAll("tr.link-related").classed("hidden",!1),e.dom.customizeOptionsTable.selectAll("tr.node-related,tr.label-related,tr.graph-related").classed("hidden",!0))}),"graph"===e.status.customizeCurrentMenu?(e.dom.customizeMenu.append("span").style("font-weight","bold").style("margin-left","10px").text("GRAPH"),e.dom.customizeOptionsTable.selectAll("tr.graph-related").classed("hidden",!1),e.dom.customizeOptionsTable.selectAll("tr.node-related,tr.label-related,tr.link-related").classed("hidden",!0)):e.dom.customizeMenu.append("a").style("font-weight","bold").style("margin-left","10px").text("GRAPH").attr("tabindex",4).on("click",function(){e.tools.createCustomizeMenu("graph"),e.dom.customizeOptionsTable.selectAll("tr.graph-related").classed("hidden",!1),e.dom.customizeOptionsTable.selectAll("tr.node-related,tr.label-related,tr.link-related").classed("hidden",!0)}).on("keydown",function(){13===d3.event.keyCode&&(e.tools.createCustomizeMenu("graph"),e.dom.customizeOptionsTable.selectAll("tr.graph-related").classed("hidden",!1),e.dom.customizeOptionsTable.selectAll("tr.node-related,tr.label-related,tr.link-related").classed("hidden",!0))}),e.dom.customizeMenu.append("span").html("<br><br>")},e.tools.wrapLabels=function(a,b){a.each(function(a,c){var d=d3.select(this);if(0===c&&(e.status.labelFontSize=parseInt(d.style("font-size"))),!this.hasAttribute("lines")){for(var f,g=d.text().split(/\s+/).reverse(),h=[],i=0,j=e.status.labelFontSize*e.conf.wrappedLabelLineHeight,k=d.attr("x"),l=d.attr("y"),m=0,n=d.text(null).append("tspan").attr("x",k).attr("y",l).attr("dy",m+"px");f=g.pop();)h.push(f),n.text(h.join(" ")),n.node().getComputedTextLength()>b&&(h.pop(),n.text(h.join(" ")),h=[f],n=d.append("tspan").attr("x",k).attr("y",l).attr("dy",++i*j+m+"px").text(f));d.attr("lines",i+1)}})},e.lib.labelerPlugin=function(){var a,b,c=[],d=[],e=1,f=1,g={},h=5,i=.5,j=0,k=0,l=.2,m=1,n=30,o=30,p=1,q=!1,r=!1,s=function(a){var b=c.length,e=0,f=c[a].x-d[a].x,g=d[a].y-c[a].y,h=Math.sqrt(f*f+g*g),i=!0;h>0&&(e+=h*l),f/=h,g/=h,e+=f>0&&g>0?0:0>f&&g>0?p:0>f&&0>g?2*p:3*p;for(var j,k,q,r,s,t,u,w=c[a].x,x=c[a].y-c[a].height+2,y=c[a].x+c[a].width,z=c[a].y+2,A=0;b>A;A++)A!==a&&(i=v(d[a].x,c[a].x,d[A].x,c[A].x,d[a].y,c[a].y,d[A].y,c[A].y),i&&(e+=m),j=c[A].x,q=c[A].y-c[A].height+2,k=c[A].x+c[A].width,r=c[A].y+2,s=Math.max(0,Math.min(k,y)-Math.max(j,w)),t=Math.max(0,Math.min(r,z)-Math.max(q,x)),u=s*t,e+=u*n),j=d[A].x-d[A].r,q=d[A].y-d[A].r,k=d[A].x+d[A].r,r=d[A].y+d[A].r,s=Math.max(0,Math.min(k,y)-Math.max(j,w)),t=Math.max(0,Math.min(r,z)-Math.max(q,x)),u=s*t,e+=u*o;return e},t=function(b){var g,i=Math.floor(Math.random()*c.length),l=c[i].x,m=c[i].y;g=q?a(i,c,d):s(i),c[i].x+=(Math.random()-.5)*h,c[i].y+=(Math.random()-.5)*h,c[i].x>e&&(c[i].x=l),c[i].x<0&&(c[i].x=l),c[i].y>f&&(c[i].y=m),c[i].y<0&&(c[i].y=m);var n;n=q?a(i,c,d):s(i);var o=n-g;Math.random()<Math.exp(-o/b)?j+=1:(c[i].x=l,c[i].y=m,k+=1)},u=function(b){var g,h=Math.floor(Math.random()*c.length),l=c[h].x,m=c[h].y;g=q?a(h,c,d):s(h);var n=(Math.random()-.5)*i,o=Math.sin(n),p=Math.cos(n);c[h].x-=d[h].x,c[h].y-=d[h].y;var r=c[h].x*p-c[h].y*o,t=c[h].x*o+c[h].y*p;c[h].x=r+d[h].x,c[h].y=t+d[h].y,c[h].x>e&&(c[h].x=l),c[h].x<0&&(c[h].x=l),c[h].y>f&&(c[h].y=m),c[h].y<0&&(c[h].y=m);var u;u=q?a(h,c,d):s(h);var v=u-g;Math.random()<Math.exp(-v/b)?j+=1:(c[h].x=l,c[h].y=m,k+=1)},v=function(a,b,c,d,e,f,g,h){var i,j,k,l,m;return k=(h-g)*(b-a)-(d-c)*(f-e),l=(d-c)*(e-g)-(h-g)*(a-c),m=(b-a)*(e-g)-(f-e)*(a-c),i=l/k,j=m/k,!(0>i||i>1||0>j||j>1)},w=function(a,b,c){return a-b/c};return g.start=function(a){for(var b=c.length,d=1,e=1,f=0;a>f;f++){for(var g=0;b>g;g++)Math.random()<.5?t(d):u(d);d=w(d,e,a)}},g.width=function(a){return arguments.length?(e=a,g):e},g.height=function(a){return arguments.length?(f=a,g):f},g.label=function(a){return arguments.length?(c=a,g):c},g.anchor=function(a){return arguments.length?(d=a,g):d},g.alt_energy=function(b){return arguments.length?(a=b,q=!0,g):s},g.alt_schedule=function(a){return arguments.length?(b=a,r=!0,g):w},g},e.lib.lassoPlugin=function(){function a(){function a(){q="",n.attr("d",null),o.attr("d",null),t=0,c[0].forEach(function(a){a.hoverSelected=!1,a.loopSelected=!1;var b=a.getBBox(),c=a.getCTM();a.lassoPoint={cx:Math.round((b.x+b.width/2)*c.a+c.e),cy:Math.round((b.y+b.height/2)*c.d+c.f),edges:{top:0,right:0,bottom:0,left:0},close_edges:{left:0,right:0}}}),g===!0&&c.on("mouseover.lasso",function(){d3.select(this)[0][0].hoverSelected=!0}),j.start()}function k(){var a,g,h,i,k,l,m,u,v,w,x,y,z,A,B=d3.mouse(this)[0],C=d3.mouse(this)[1],D=function(a){A.x>a.lassoPoint.cx&&(a.lassoPoint.edges.right=a.lassoPoint.edges.right+1),A.x<a.lassoPoint.cx&&(a.lassoPoint.edges.left=a.lassoPoint.edges.left+1)},E=function(a){Math.round(z.y)!==Math.round(x.y)&&Math.round(z.x)>a.lassoPoint.cx&&(a.lassoPoint.close_edges.right=1),Math.round(z.y)!==Math.round(x.y)&&Math.round(z.x)<a.lassoPoint.cx&&(a.lassoPoint.close_edges.left=1)},F=function(a){return a.lassoPoint.cy===Math.round(z.y)},G=function(a){var c;return a.lassoPoint.cy===A.y&&a.lassoPoint.cy!==y.y?(s={x:y.x,y:y.y},c=!1):a.lassoPoint.cy===A.y&&a.lassoPoint.cy===y.y?c=!1:a.lassoPoint.cy===y.y&&a.lassoPoint.cy!==A.y?c=b(a.lassoPoint.cy-A.y)!==b(a.lassoPoint.cy-s.y):(s={x:y.x,y:y.y},c=b(a.lassoPoint.cy-A.y)!==b(a.lassoPoint.cy-y.y)),c};for(""===q?(q=q+"M "+B+" "+C,r=[B,C]):q=q+" L "+B+" "+C,c[0].forEach(function(a){a.lassoPoint.close_edges={left:0,right:0}}),a=Math.sqrt(Math.pow(B-r[0],2)+Math.pow(C-r[1],2)),g="M "+B+" "+C+" L "+r[0]+" "+r[1],n.attr("d",q),d>=a?o.attr("display",null):o.attr("display","none"),f=d>=a,h=d3.select("path")[0][0].attributes.d.value+"Z",p.attr("d",h),m=n.node(),u=m.getTotalLength(),w=m.getPointAtLength(t-1),v=t;u>=v;v++)z=m.getPointAtLength(v),A={x:Math.round(100*z.x)/100,y:Math.round(100*z.y)/100},x=m.getPointAtLength(v-1),y={x:Math.round(100*x.x)/100,y:Math.round(100*x.y)/100},c[0].filter(G).forEach(D);if(f===!0&&e===!0){for(o.attr("d",g),i=o.node(),k=i.getTotalLength(),l={left:0,right:0},v=0;k>=v;v++)z=i.getPointAtLength(v),x=i.getPointAtLength(v-1),c[0].filter(F).forEach(E);c[0].forEach(function(a){a.lassoPoint.edges.left+a.lassoPoint.close_edges.left>0&&(a.lassoPoint.edges.right+a.lassoPoint.close_edges.right)%2===1?a.loopSelected=!0:a.loopSelected=!1})}else c[0].forEach(function(a){a.loopSelected=!1});d3.selectAll(c[0].filter(function(a){return a.loopSelected&&f||a.hoverSelected})).attr("d",function(a){return a.possible=!0,a.possible}),d3.selectAll(c[0].filter(function(a){return!(a.loopSelected&&f||a.hoverSelected)})).attr("d",function(a){return a.possible=!1,a.possible}),j.draw(),t=u+1}function l(){c.on("mouseover.lasso",null),c.filter(function(a){return a.possible===!0}).attr("d",function(a){return a.selected=!0,a.selected}),c.filter(function(a){return a.possible===!1}).attr("d",function(a){return a.selected=!1,a.selected}),c.attr("d",function(a){return a.possible=!1,a.possible}),n.attr("d",null),o.attr("d",null),j.end()}var m,n,o,p,q,r,s,t,u,v=d3.select(this[0][0]);i=i||v,0===i.selectAll("g.lasso").size()?(m=i.append("g").attr("class","lasso"),n=m.append("path").attr("class","drawn"),o=m.append("path").attr("class","loop_close"),p=m.append("path").attr("class","complete_path").attr("display","none")):(m=i.select("g.lasso"),n=m.select("path.drawn"),o=m.select("path.loop_close"),p=m.select("path.complete_path")),u=d3.behavior.drag().on("dragstart",a).on("drag",k).on("dragend",l),h.call(u)}function b(a){return a?0>a?-1:1:0}var c=null,d=75,e=!0,f=!1,g=!0,h=null,i=null,j={start:function(){},draw:function(){},end:function(){}};return a.items=function(b){return arguments.length?(c=b,c[0].forEach(function(a){var b=d3.select(a);"undefined"==typeof b.datum()?b.datum({possible:!1,selected:!1}):b.attr("d",function(a){return a.possible=!1,a.selected=!1,a})}),a):c},a.closePathDistance=function(b){return arguments.length?(d=b,a):d},a.closePathSelect=function(b){return arguments.length?(e=b===!0,a):e},a.isPathClosed=function(b){return arguments.length?(f=b===!0,a):f},a.hoverSelect=function(b){return arguments.length?(g=b===!0,a):g},a.on=function(b,c){if(!arguments.length)return j;if(1===arguments.length)return j[b];var d=["start","draw","end"];return d.indexOf(b)>-1&&(j[b]=c),a},a.area=function(b){return arguments.length?(h=b,a):h},a.pathContainer=function(b){return arguments.length?(i=d3.select(b[0][0]),a):i},a},e.main.init(),f.start=function(a){var b;return a?f.render(a):e.status.apexPluginId?(e.conf.showLoadingIndicatorOnAjaxCall&&f.showLoadingIndicator(!0),apex.server.plugin(e.status.apexPluginId,{p_debug:$v("pdebug"),pageItems:e.status.apexPageItemsToSubmit},{success:function(a){e.conf.showLoadingIndicatorOnAjaxCall&&f.showLoadingIndicator(!1),b=a.trim().substr(0,1),"<"===b||"{"===b?f.render(a):"no_query_defined"===a.trim().substr(0,16)?(f.render(),e.tools.logError("No query defined.")):"query_returned_no_data"===a.trim().substr(0,22)?(f.render({data:{nodes:[{ID:"1",LABEL:"ERROR: No data.",COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}}),e.tools.logError("Query returned no data.")):(f.render({data:{nodes:[{ID:"1",LABEL:"ERROR: "+a+".",COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}}),e.tools.logError(a))},error:function(a,b,c){f.render({data:{nodes:[{ID:"1",LABEL:"AJAX call terminated with errors.",COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}}),e.tools.logError("AJAX call terminated with errors: "+c+".")},dataType:"text"})):f.render(),f},f.render=function(a){var b;if(e.status.graphStarted=!0,e.status.graphRendering=!0,e.tools.triggerApexEvent(document.querySelector("#"+e.dom.containerId),"apexbeforerefresh"),a||e.status.graphReady?a&&(e.status.sampleData=!1):(e.tools.logError("Houston, we have a problem - we have to provide sample data."),e.status.sampleData=!0,a=e.data.sampleData),a){if(e.status.graphReady&&(e.status.graphOldPositions=f.positions()),a.constructor===Object)e.data.dataConverted=a,e.conf.debug&&(e.tools.log("Data object:"),e.tools.log(e.data.dataConverted,!0));else if(a.constructor===String){if("<"===a.trim().substr(0,1))try{e.data.dataConverted=e.tools.xmlToJson(e.tools.parseXml(a)),null===e.data.dataConverted&&(b="Unable to convert XML string.",e.tools.logError(b),e.data.dataConverted={data:{nodes:[{ID:"1",LABEL:"ERROR: "+b,COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}})}catch(c){b="Unable to convert XML string: "+c.message+".",e.tools.logError(b),e.data.dataConverted={data:{nodes:[{ID:"1",LABEL:"ERROR: "+b,COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}}}else if("{"===a.trim().substr(0,1))try{e.data.dataConverted=JSON.parse(a)}catch(c){b="Unable to parse JSON string: "+c.message+".",e.tools.logError(b),e.data.dataConverted={data:{nodes:[{ID:"1",LABEL:"ERROR: "+b,COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}}}else b='Your data string is not starting with "<" or "{" - parsing not possible.',e.tools.logError(b),e.data.dataConverted={data:{nodes:[{ID:"1",LABEL:"ERROR: "+b,COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}};e.conf.debug&&(e.tools.log("Data string:"),e.tools.log(a,!0),e.tools.log("Converted data object:"),e.tools.log(e.data.dataConverted,!0))}else b="Unable to parse your data - input data can be a XML string, JSON string or JavaScript object.",e.tools.logError(b),e.data.dataConverted={data:{nodes:[{ID:"1",LABEL:"ERROR: "+b,COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}};null!==e.data.dataConverted?e.data.dataConverted.hasOwnProperty("data")&&null!==e.data.dataConverted.data?(e.data.dataConverted.data.hasOwnProperty("nodes")&&null!==e.data.dataConverted.data.nodes?(e.data.nodes=e.data.dataConverted.data.nodes,0===e.data.nodes.length&&(b="Your data contains an empty nodes array.",e.tools.logError(b),e.data.nodes=[{ID:"1",LABEL:"ERROR: "+b,COLORVALUE:"1",SIZEVALUE:"1"}])):(b="Your data contains no nodes.",e.tools.logError(b),e.data.nodes=[{ID:"1",LABEL:"ERROR: "+b,COLORVALUE:"1",SIZEVALUE:"1"}]),e.data.dataConverted.data.hasOwnProperty("links")&&null!==e.data.dataConverted.data.links?e.data.links=e.data.dataConverted.data.links:e.data.links=[]):(b="Missing root element named data.",e.tools.logError(b),e.data={nodes:[{ID:"1",LABEL:"ERROR: "+b,COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}):(b="Unable to parse your data - please consult the API reference for possible data formats.",e.tools.logError(b),e.data={nodes:[{ID:"1",LABEL:"ERROR: "+b,COLORVALUE:"1",SIZEVALUE:"1"}],links:[]}),e.data.idLookup=[],e.data.nodes.forEach(function(a){a.SIZEVALUE=parseFloat(a.SIZEVALUE),a.LABELCIRCULAR=e.tools.parseBool(a.LABELCIRCULAR),a.fixed&&(a.fixed=e.tools.parseBool(a.fixed)),a.x&&(a.x=parseFloat(a.x)),a.y&&(a.y=parseFloat(a.y)),e.data.idLookup[a.ID]=a}),e.data.links.forEach(function(a){a.source=e.data.idLookup[a.FROMID],a.target=e.data.idLookup[a.TOID]}),e.data.links=e.data.links.filter(function(a){return"undefined"!=typeof a.source&&"undefined"!=typeof a.target}),e.data.neighbors=e.data.links.map(function(a){return a.FROMID+":"+a.TOID}),e.data.distinctNodeColorValues=e.data.nodes.map(function(a){return(a.COLORLABEL?a.COLORLABEL:"")+";"+a.COLORVALUE}).filter(function(a,b,c){return c.indexOf(a)===b}).sort(function(a,b){var c=a.toLowerCase(),d=b.toLowerCase();return d>c?1:c>d?-1:0}),e.data.distinctLinkColorValues=e.data.links.map(function(a){return a.COLOR}).filter(Boolean).filter(function(a,b,c){return c.indexOf(a)===b}).sort(function(a,b){var c=a.toLowerCase(),d=b.toLowerCase();return d>c?1:c>d?-1:0}),e.conf.positions?e.conf.positions.constructor===Array?e.conf.positions.forEach(function(a){void 0!==e.data.idLookup[a.ID]&&(e.data.idLookup[a.ID].fixed||(e.data.idLookup[a.ID].fixed=a.fixed),e.data.idLookup[a.ID].x||(e.data.idLookup[a.ID].x=e.data.idLookup[a.ID].px=a.x),e.data.idLookup[a.ID].y||(e.data.idLookup[a.ID].y=e.data.idLookup[a.ID].py=a.y))}):e.tools.logError("Unable to set node positions: positions method parameter must be an array of node positions"):e.status.graphOldPositions&&e.status.graphOldPositions.forEach(function(a){void 0!==e.data.idLookup[a.ID]&&(e.data.idLookup[a.ID].fixed||(e.data.idLookup[a.ID].fixed=a.fixed),e.data.idLookup[a.ID].x||(e.data.idLookup[a.ID].x=e.data.idLookup[a.ID].px=a.x),e.data.idLookup[a.ID].y||(e.data.idLookup[a.ID].y=e.data.idLookup[a.ID].py=a.y))}),e.conf.positions=null,e.status.graphOldPositions=null}return e.tools.setColorFunction(),e.tools.setRadiusFunction(),e.data.nodes.forEach(function(a){a.radius=e.tools.radius(a.SIZEVALUE)}),e.main.markers=e.dom.defs.selectAll("marker.custom").data(e.data.distinctLinkColorValues,function(a){return a}),e.main.markers.enter().append("svg:marker").attr("id",function(a){return e.dom.containerId+"_"+a}).attr("class","custom").attr("stroke","none").attr("fill",function(a){return a}).attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerWidth",5).attr("markerHeight",5).attr("orient","auto").attr("markerUnits","strokeWidth").append("svg:path").attr("d","M0,0 L10,5 L0,10"),e.main.markers.exit().remove(),e.main.links=e.dom.graph.selectAll("line.link").data(e.data.links.filter(function(a){return a.FROMID!==a.TOID}),function(a){return a.FROMID+"_"+a.TOID}),e.main.links.enter().append("svg:line").attr("class","link").on("mouseenter",e.tools.onLinkMouseenter).on("mouseleave",e.tools.onLinkMouseleave).on("click",e.tools.onLinkClick),e.main.links.exit().remove(),e.main.links.style("marker-end",e.tools.getMarkerUrl).classed("dotted",function(a){return"dotted"===a.STYLE}).classed("dashed",function(a){return"dashed"===a.STYLE}).style("stroke",function(a){return a.COLOR?a.COLOR:null}),e.main.selfLinks=e.dom.graph.selectAll("path.link").data(e.data.links.filter(function(a){return a.FROMID===a.TOID&&e.conf.showSelfLinks}),function(a){return a.FROMID+"_"+a.TOID}),e.main.selfLinks.enter().append("svg:path").attr("id",function(a){return e.dom.containerId+"_link_"+a.FROMID+"_"+a.TOID}).attr("class","link").on("mouseenter",e.tools.onLinkMouseenter).on("mouseleave",e.tools.onLinkMouseleave).on("click",e.tools.onLinkClick),e.main.selfLinks.exit().remove(),e.main.selfLinks.attr("d",function(a){return e.tools.getSelfLinkPath(a)}).style("marker-end",e.tools.getMarkerUrl).classed("dotted",function(a){return"dotted"===a.STYLE}).classed("dashed",function(a){return"dashed"===a.STYLE}).style("stroke",function(a){return a.COLOR?a.COLOR:null}),e.main.patterns=e.dom.defs.selectAll("pattern").data(e.data.nodes.filter(function(a){return a.IMAGE?!0:!1}),function(a){return a.ID}),e.main.patterns.enter().append("svg:pattern").attr("id",function(a){return e.dom.containerId+"_pattern_"+a.ID}).append("svg:image"),e.main.patterns.exit().remove(),e.main.patterns.each(function(){d3.select(this).attr("x",0).attr("y",0).attr("height",function(a){return 2*a.radius}).attr("width",function(a){return 2*a.radius}),d3.select(this.firstChild).attr("x",0).attr("y",0).attr("height",function(a){return 2*a.radius}).attr("width",function(a){return 2*a.radius}).attr("xlink:href",function(a){return a.IMAGE})}),e.main.nodes=e.dom.graph.selectAll("circle.node").data(e.data.nodes,function(a){return a.ID}),e.main.nodes.enter().append("svg:circle").attr("class","node").attr("cx",function(a){return a.fixed||a.x?void 0:(a.x=Math.floor(Math.random()*e.tools.getGraphWidth()+1),a.x)}).attr("cy",function(a){return a.fixed||a.y?void 0:(a.y=Math.floor(Math.random()*e.conf.height+1),a.y)}).on("mouseenter",e.tools.onNodeMouseenter).on("mouseleave",e.tools.onNodeMouseleave).on("click",e.tools.onNodeClick).on("dblclick",e.tools.onNodeDblclick).on("contextmenu",e.tools.onNodeContextmenu),e.main.nodes.exit().remove(),e.main.nodes.attr("r",function(a){return a.radius}).attr("fill",function(a){return a.IMAGE?"url(#"+e.dom.containerId+"_pattern_"+a.ID+")":e.tools.color(a.COLORVALUE)}),e.conf.showLabels?(e.main.labels=e.dom.graph.selectAll("text.label").data(e.data.nodes.filter(function(a){return!a.LABELCIRCULAR&&!e.conf.labelsCircular}),function(a){return a.ID}),e.main.labels.enter().append("svg:text").attr("class","label"),e.main.labels.exit().remove(),e.main.labels.text(function(a){return a.LABEL}),e.main.labelPaths=e.dom.defs.selectAll("path.label").data(e.data.nodes.filter(function(a){return a.LABELCIRCULAR||e.conf.labelsCircular}),function(a){return a.ID}),e.main.labelPaths.enter().append("svg:path").attr("id",function(a){return e.dom.containerId+"_textPath_"+a.ID}).attr("class","label"),e.main.labelPaths.exit().remove(),e.main.labelPaths.attr("d",function(a){return e.tools.getLabelPath(a)}),e.main.labelsCircular=e.dom.graph.selectAll("text.labelCircular").data(e.data.nodes.filter(function(a){return a.LABELCIRCULAR||e.conf.labelsCircular}),function(a){return a.ID}),e.main.labelsCircular.enter().append("svg:text").attr("class","labelCircular").append("svg:textPath").attr("xlink:href",function(a){return"#"+e.dom.containerId+"_textPath_"+a.ID}),e.main.labelsCircular.exit().remove(),e.main.labelsCircular.each(function(a){d3.select(this.firstChild).text(a.LABEL)})):(e.dom.defs.selectAll("path.label").remove(),e.dom.graph.selectAll("text.label,text.labelCircular").remove()),f.debug(e.conf.debug).showBorder(e.conf.showBorder).setDomParentPaddingToZero(e.conf.setDomParentPaddingToZero).useDomParentWidth(e.conf.useDomParentWidth).width(e.conf.width).height(e.conf.height).alignFixedNodesToGrid(e.conf.alignFixedNodesToGrid).dragMode(e.conf.dragMode).pinMode(e.conf.pinMode).lassoMode(e.conf.lassoMode).zoomMode(e.conf.zoomMode).transform(e.conf.transform).autoRefresh(e.conf.autoRefresh).linkDistance(e.conf.linkDistance).wrapLabels(e.conf.wrapLabels).charge(e.conf.charge).chargeDistance(e.conf.chargeDistance).gravity(e.conf.gravity).linkStrength(e.conf.linkStrength).friction(e.conf.friction).theta(e.conf.theta),e.main.force.nodes(e.data.nodes).links(e.data.links).start(),e.status.customize?e.tools.createCustomizeWizard():e.tools.createCustomizeLink(),e.status.graphReady=!0,e.status.graphRendering=!1,e.tools.triggerApexEvent(document.querySelector("#"+e.dom.containerId),"apexafterrefresh"),f},f.resume=function(){return e.status.graphReady?e.main.force.resume():f.render(),e.tools.createCustomizeWizardIfNotRendering(),f},f.showBorder=function(a){return arguments.length?(e.conf.showBorder=a,e.status.graphStarted&&(e.dom.svg.classed("border",e.conf.showBorder),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.showBorder},f.showLegend=function(a){return arguments.length?(e.conf.showLegend=a,e.status.graphStarted&&(e.conf.showLegend?(e.tools.removeLegend(),
e.tools.createLegend()):e.tools.removeLegend(),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.showLegend},f.showSelfLinks=function(a){return arguments.length?(e.conf.showSelfLinks=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.showSelfLinks},f.showLinkDirection=function(a){return arguments.length?(e.conf.showLinkDirection=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.showLinkDirection},f.showTooltips=function(a){return arguments.length?(e.conf.showTooltips=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.showTooltips},f.tooltipPosition=function(a){return arguments.length?(e.conf.tooltipPosition=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.tooltipPosition},f.colorScheme=function(a){return arguments.length?(e.conf.colorScheme=a,e.tools.setColorFunction(),e.status.graphStarted&&(e.main.nodes.attr("fill",function(a){return a.IMAGE?"url(#"+e.dom.containerId+"_pattern_"+a.ID+")":e.tools.color(a.COLORVALUE)}),e.conf.showLegend&&(e.tools.removeLegend(),e.tools.createLegend()),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.colorScheme},f.showLabels=function(a){return arguments.length?(e.conf.showLabels=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.showLabels},f.wrapLabels=function(a){return arguments.length?(e.conf.wrapLabels=a,e.conf.wrapLabels&&(e.status.wrapLabelsOnNextTick=!0),e.status.graphStarted&&(e.main.labels.attr("lines",null),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.wrapLabels},f.wrappedLabelWidth=function(a){return arguments.length?(e.conf.wrappedLabelWidth=a,e.conf.wrapLabels&&(e.main.labels.attr("lines",null),e.status.wrapLabelsOnNextTick=!0),e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.wrappedLabelWidth},f.wrappedLabelLineHeight=function(a){return arguments.length?(e.conf.wrappedLabelLineHeight=a,e.conf.wrapLabels&&(e.status.wrapLabelsOnNextTick=!0),e.status.graphStarted&&(e.main.labels.attr("lines",null),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.wrappedLabelLineHeight},f.labelsCircular=function(a){return arguments.length?(e.conf.labelsCircular=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.labelsCircular},f.labelDistance=function(a){return arguments.length?(e.conf.labelDistance=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.labelDistance},f.preventLabelOverlappingOnForceEnd=function(a){return arguments.length?(e.conf.preventLabelOverlappingOnForceEnd=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.preventLabelOverlappingOnForceEnd},f.labelPlacementIterations=function(a){return arguments.length?(e.conf.labelPlacementIterations=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.labelPlacementIterations},f.dragMode=function(a){return arguments.length?(e.conf.dragMode=a,e.status.graphStarted&&(e.conf.dragMode?e.main.nodes.call(e.main.drag):(e.main.nodes.on("mousedown.drag",null),e.main.nodes.on("touchstart.drag",null)),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.dragMode},f.pinMode=function(a){return arguments.length?(e.conf.pinMode=a,e.status.graphStarted&&(e.conf.pinMode?e.main.drag.on("dragstart",function(a){d3.select(this).classed("fixed",a.fixed=1)}):e.main.drag.on("dragstart",null),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.pinMode},f.lassoMode=function(a){return arguments.length?(e.conf.lassoMode=a,e.status.graphStarted&&(e.conf.lassoMode?(e.dom.graphOverlay.call(e.main.lasso),e.main.lasso.items(e.main.nodes),e.main.lasso.on("start",function(){e.main.lasso.items().classed("selected",!1),e.tools.onLassoStart(e.main.lasso.items())}),e.main.lasso.on("draw",function(){e.main.lasso.items().filter(function(a){return a.possible===!0}).classed("selected",!0),e.main.lasso.items().filter(function(a){return a.possible===!1}).classed("selected",!1)}),e.main.lasso.on("end",function(){e.main.lasso.items().filter(function(a){return a.selected===!0}).classed("selected",!0),e.main.lasso.items().filter(function(a){return a.selected===!1}).classed("selected",!1),e.tools.onLassoEnd(e.main.lasso.items())}),e.events.mousedownLasso=e.dom.graphOverlay.on("mousedown.drag"),e.events.touchstartLasso=e.dom.graphOverlay.on("touchstart.drag"),e.dom.graphOverlay.on("mousedown.drag",e.tools.lassoEventProxy(e.events.mousedownLasso)),e.dom.graphOverlay.on("touchstart.drag",e.tools.lassoEventProxy(e.events.touchstartLasso))):(e.dom.graphOverlay.on(".drag",null),e.main.nodes.classed("selected",!1)),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.lassoMode},f.zoomMode=function(a){return arguments.length?(e.conf.zoomMode=a,e.status.graphStarted&&(e.conf.zoomMode?(e.main.zoom.scaleExtent([e.conf.minZoomFactor,e.conf.maxZoomFactor]).size([e.tools.getGraphWidth(),e.conf.height]).on("zoom",e.main.zoomed),e.dom.graphOverlay.call(e.main.zoom),e.events.dblclickZoom=e.dom.graphOverlay.on("dblclick.zoom"),e.events.mousedownZoom=e.dom.graphOverlay.on("mousedown.zoom"),e.events.touchstartZoom=e.dom.graphOverlay.on("touchstart.zoom"),e.dom.graphOverlay.on("dblclick.zoom",e.tools.zoomEventProxy(e.events.dblclickZoom)),e.dom.graphOverlay.on("mousedown.zoom",e.tools.zoomEventProxy(e.events.mousedownZoom)),e.dom.graphOverlay.on("touchstart.zoom",e.tools.zoomEventProxy(e.events.touchstartZoom)),JSON.stringify(e.conf.transform)!==JSON.stringify(e.confDefaults.transform)&&(e.dom.graph.attr("transform","translate("+e.main.zoom.translate()+")scale("+e.main.zoom.scale()+")"),e.tools.writeConfObjectIntoWizard())):(e.dom.graphOverlay.on(".zoom",null),e.main.zoom.translate([0,0]),e.main.zoom.scale(1),e.conf.transform={translate:[0,0],scale:1},e.dom.graph.attr("transform","translate(0,0)scale(1)")),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.zoomMode},f.minZoomFactor=function(a){return arguments.length?(e.conf.minZoomFactor=a,e.status.graphReady&&f.zoomMode(e.conf.zoomMode),f):e.conf.minZoomFactor},f.maxZoomFactor=function(a){return arguments.length?(e.conf.maxZoomFactor=a,e.status.graphReady&&f.zoomMode(e.conf.zoomMode),f):e.conf.maxZoomFactor},f.zoom=function(a,b,c){return f.zoomSmooth(a,b,c,0),f},f.zoomSmooth=function(a,b,c,d){var g,h,i,j=e.tools.getGraphWidth();return a=isNaN(a)?j/2:parseInt(a),b=isNaN(b)?e.conf.height/2:parseInt(b),c=isNaN(c)?j:parseInt(c),d=isNaN(d)?1500:parseInt(d),i=j/c,g=j/2-a*i,h=e.conf.height/2-b*i,e.main.interpolateZoom([g,h],i,d),f},f.transform=function(a){return arguments.length?(e.main.interpolateZoom(a.translate,a.scale,0),f):{translate:e.main.zoom.translate(),scale:e.main.zoom.scale()}},f.zoomToFit=function(a){var b,c,d,g,h={},i=10;return a=isNaN(a)?500:parseInt(a),h.width=e.tools.getGraphWidth(),h.height=e.conf.height,b=e.dom.graph.node().getBBox(),g=Math.min((h.height-2*i)/b.height,(h.width-2*i)/b.width),c=(h.width-b.width*g)/2-b.x*g,d=(h.height-b.height*g)/2-b.y*g,e.main.interpolateZoom([c,d],g,a),f},f.zoomToFitOnForceEnd=function(a){return arguments.length?(e.conf.zoomToFitOnForceEnd=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.zoomToFitOnForceEnd},f.showLoadingIndicatorOnAjaxCall=function(a){return arguments.length?(e.conf.showLoadingIndicatorOnAjaxCall=a,f):e.conf.showLoadingIndicatorOnAjaxCall},f.showLoadingIndicator=function(a){return e.tools.parseBool(a)?e.dom.loading.style("display","block"):e.dom.loading.style("display","none"),f},f.alignFixedNodesToGrid=function(a){return arguments.length?(e.conf.alignFixedNodesToGrid=a,e.status.graphStarted&&(e.conf.alignFixedNodesToGrid?(e.status.graphReady&&e.main.nodes.each(function(a){a.fixed&&(a.x=a.px=e.tools.getNearestGridPosition(a.x,e.conf.width),a.y=a.py=e.tools.getNearestGridPosition(a.y,e.conf.height))}),e.main.drag.on("dragend",function(a){a.x=a.px=e.tools.getNearestGridPosition(a.x,e.conf.width),a.y=a.py=e.tools.getNearestGridPosition(a.y,e.conf.height)})):e.main.drag.on("dragend",null),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.alignFixedNodesToGrid},f.gridSize=function(a){return arguments.length?(e.conf.gridSize=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.gridSize},f.moveFixedNodes=function(a,b){return e.status.graphStarted&&(a||(a=0),b||(b=0),(0!==a||0!==b)&&e.main.nodes.each(function(c){c.fixed&&(c.x=c.px=e.conf.alignFixedNodesToGrid?e.tools.getNearestGridPosition(c.x+a,e.conf.width):c.x+a,c.y=c.py=e.conf.alignFixedNodesToGrid?e.tools.getNearestGridPosition(c.y+b,e.conf.width):c.y+b)})),f},f.releaseFixedNodes=function(){return e.status.graphStarted&&e.main.nodes.each(function(a){a.fixed=0}),f},f.nodeEventToStopPinMode=function(a){return arguments.length?(e.conf.nodeEventToStopPinMode=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.nodeEventToStopPinMode},f.onNodeContextmenuPreventDefault=function(a){return arguments.length?(e.conf.onNodeContextmenuPreventDefault=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.onNodeContextmenuPreventDefault},f.nodeEventToOpenLink=function(a){return arguments.length?(e.conf.nodeEventToOpenLink=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.nodeEventToOpenLink},f.nodeLinkTarget=function(a){return arguments.length?(e.conf.nodeLinkTarget=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.nodeLinkTarget},f.autoRefresh=function(a){return arguments.length?(e.conf.autoRefresh=a,e.status.graphStarted&&(e.conf.autoRefresh&&e.conf.refreshInterval&&!e.conf.interval?(e.conf.interval=window.setInterval(function(){f.start()},e.conf.refreshInterval),e.tools.log("Auto refresh started with an interval of "+e.conf.refreshInterval+" milliseconds.")):!e.conf.autoRefresh&&e.conf.interval&&(clearInterval(e.conf.interval),e.conf.interval=null,e.tools.log("Auto refresh stopped.")),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.autoRefresh},f.refreshInterval=function(a){return arguments.length?(e.conf.refreshInterval=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.refreshInterval},f.useDomParentWidth=function(a){return arguments.length?(e.conf.useDomParentWidth=a,e.status.graphStarted&&(e.conf.useDomParentWidth?(e.dom.containerWidth=e.tools.getSvgParentInnerWidth(),d3.select(window).on("resize",function(){var a=e.dom.containerWidth,b=e.tools.getSvgParentInnerWidth();a!==b&&(e.dom.containerWidth=b,f.width(e.conf.width).resume())})):d3.select(window).on("resize",null),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.useDomParentWidth},f.setDomParentPaddingToZero=function(a){return arguments.length?(e.conf.setDomParentPaddingToZero=a,e.status.graphStarted&&(e.conf.setDomParentPaddingToZero?e.dom.svgParent.style("padding","0"):e.dom.svgParent.style("padding",null),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.setDomParentPaddingToZero},f.domParentWidth=function(){return e.dom.containerWidth||e.tools.getSvgParentInnerWidth()},f.width=function(a){return arguments.length?(e.conf.width=a,e.status.graphStarted&&(e.dom.svg.attr("width",e.tools.getGraphWidth()),e.dom.graphOverlaySizeHelper.attr("width",e.tools.getGraphWidth()),e.dom.loadingRect.attr("width",e.tools.getGraphWidth()),e.dom.loadingText.attr("x",e.tools.getGraphWidth()/2),e.main.force.size([e.tools.getGraphWidth(),e.conf.height]),e.conf.zoomMode&&e.main.zoom.size([e.tools.getGraphWidth(),e.conf.height]),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.width},f.height=function(a){return arguments.length?(e.conf.height=a,e.status.graphStarted&&(e.dom.svg.attr("height",e.conf.height),e.dom.graphOverlaySizeHelper.attr("height",e.conf.height),e.dom.loadingRect.attr("height",e.conf.height),e.dom.loadingText.attr("y",e.conf.height/2),e.main.force.size([e.tools.getGraphWidth(),e.conf.height]),e.conf.showLegend&&(e.tools.removeLegend(),e.tools.createLegend()),e.conf.zoomMode&&e.main.zoom.size([e.tools.getGraphWidth(),e.conf.height]),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.height},f.minNodeRadius=function(a){return arguments.length?(e.conf.minNodeRadius=a,e.status.graphReady&&(e.tools.setRadiusFunction(),e.main.nodes.each(function(a){a.radius=e.tools.radius(a.SIZEVALUE)}),e.main.nodes.attr("r",function(a){return a.radius}),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.minNodeRadius},f.maxNodeRadius=function(a){return arguments.length?(e.conf.maxNodeRadius=a,e.status.graphReady&&(e.tools.setRadiusFunction(),e.main.nodes.each(function(a){a.radius=e.tools.radius(a.SIZEVALUE)}),e.main.nodes.attr("r",function(a){return a.radius}),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.maxNodeRadius},f.selfLinkDistance=function(a){return arguments.length?(e.conf.selfLinkDistance=a,e.status.graphStarted&&e.tools.createCustomizeWizardIfNotRendering(),f):e.conf.selfLinkDistance},f.linkDistance=function(a){return arguments.length?(e.conf.linkDistance=a,e.status.graphStarted&&(e.main.force.linkDistance(e.conf.linkDistance),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.linkDistance},f.charge=function(a){return arguments.length?(e.conf.charge=a,e.status.graphStarted&&(e.main.force.charge(e.conf.charge),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.charge},f.chargeDistance=function(a){return arguments.length?(e.conf.chargeDistance=a,e.status.graphStarted&&(e.main.force.chargeDistance(e.conf.chargeDistance),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.chargeDistance},f.gravity=function(a){return arguments.length?(e.conf.gravity=a,e.status.graphStarted&&(e.main.force.gravity(e.conf.gravity),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.gravity},f.linkStrength=function(a){return arguments.length?(e.conf.linkStrength=a,e.status.graphStarted&&(e.main.force.linkStrength(e.conf.linkStrength),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.linkStrength},f.friction=function(a){return arguments.length?(e.conf.friction=a,e.status.graphStarted&&(e.main.force.friction(e.conf.friction),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.friction},f.theta=function(a){return arguments.length?(e.conf.theta=a,e.status.graphStarted&&(e.main.force.theta(e.conf.theta),e.tools.createCustomizeWizardIfNotRendering()),f):e.conf.theta},f.positions=function(a){if(arguments.length)return e.status.graphReady?a.constructor===Array?a.forEach(function(a){void 0!==e.data.idLookup[a.ID]&&(e.data.idLookup[a.ID].fixed=e.tools.parseBool(a.fixed),e.data.idLookup[a.ID].x=e.data.idLookup[a.ID].px=a.x,e.data.idLookup[a.ID].y=e.data.idLookup[a.ID].py=a.y)}):e.tools.logError("Unable to set node positions: positions method parameter must be an array of node positions"):e.conf.positions=a,f;var b=[];return e.data.nodes.forEach(function(a){b.push({ID:a.ID,x:Math.round(a.x),y:Math.round(a.y),fixed:a.fixed?1:0})}),b},f.onLinkClickFunction=function(a){return arguments.length?(e.conf.onLinkClickFunction=a,f):e.conf.onLinkClickFunction},f.onNodeMouseenterFunction=function(a){return arguments.length?(e.conf.onNodeMouseenterFunction=a,f):e.conf.onNodeMouseenterFunction},f.onNodeMouseleaveFunction=function(a){return arguments.length?(e.conf.onNodeMouseleaveFunction=a,f):e.conf.onNodeMouseleaveFunction},f.onNodeClickFunction=function(a){return arguments.length?(e.conf.onNodeClickFunction=a,f):e.conf.onNodeClickFunction},f.onNodeDblclickFunction=function(a){return arguments.length?(e.conf.onNodeDblclickFunction=a,f):e.conf.onNodeDblclickFunction},f.onNodeContextmenuFunction=function(a){return arguments.length?(e.conf.onNodeContextmenuFunction=a,f):e.conf.onNodeContextmenuFunction},f.onLassoStartFunction=function(a){return arguments.length?(e.conf.onLassoStartFunction=a,f):e.conf.onLassoStartFunction},f.onLassoEndFunction=function(a){return arguments.length?(e.conf.onLassoEndFunction=a,f):e.conf.onLassoEndFunction},f.sampleData=function(a){return arguments.length?(e.data.sampleData=a,f):e.data.sampleData},f.data=function(){return e.data.dataConverted},f.nodeDataById=function(a){return e.data.idLookup[a]},f.options=function(a){var b;if(arguments.length)return e.tools.applyConfigurationObject(a),f;var c={};for(b in e.conf)e.conf.hasOwnProperty(b)&&(e.confDefaults.hasOwnProperty(b)?"bool"!==e.confDefaults[b].type&&"number"!==e.confDefaults[b].type&&"text"!==e.confDefaults[b].type||e.confDefaults[b].val===e.conf[b]?"object"===e.confDefaults[b].type&&JSON.stringify(e.confDefaults[b].val)!==JSON.stringify(e.conf[b])&&(c[b]=e.conf[b]):c[b]=e.conf[b]:e.confDefaults.hasOwnProperty(b)||void 0===e.conf[b]||null===e.conf[b]||(c[b]=e.conf[b]));return c},f.optionsCustomizationWizard=function(a){var b;if(arguments.length)return e.tools.applyConfigurationObject(a),f;var c={};for(b in e.confDefaults)e.confDefaults.hasOwnProperty(b)&&("bool"!==e.confDefaults[b].type&&"number"!==e.confDefaults[b].type&&"text"!==e.confDefaults[b].type||e.confDefaults[b].val===e.conf[b]?"object"===e.confDefaults[b].type&&JSON.stringify(e.confDefaults[b].val)!==JSON.stringify(e.conf[b])&&(c[b]=e.conf[b]):c[b]=e.conf[b]);return c},f.customize=function(a){return arguments.length?(e.status.customize=a,e.status.graphStarted&&(e.status.customize?(e.tools.createCustomizeWizard(),e.tools.removeCustomizeLink()):(e.tools.removeCustomizeWizard(),e.conf.debug&&e.tools.createCustomizeLink())),f):e.status.customize},f.debug=function(a){return arguments.length?(e.conf.debug=a,e.status.graphStarted&&(e.conf.debug?e.tools.createCustomizeLink():e.tools.removeCustomizeLink()),f):e.conf.debug},f.userAgent=function(){return e.status.userAgent},f.inspect=function(){return e},f.version=function(){return e.version},e.status.apexPluginId&&(apex.jQuery("#"+e.dom.containerId).bind("apexrefresh",function(){f.start()}),apex.jQuery(window).on("apexwindowresized",function(){f.resume()}),apex.jQuery("#t_Button_navControl").click(function(){setTimeout(function(){apex.jQuery(window).trigger("apexwindowresized")},500)})),f}